function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},i={},o=t.parcelRequire1287;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in i){var t=i[e];delete i[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){i[e]=t},t.parcelRequire1287=o);var a,r=o("ilwiq"),l=o("e93rA"),s=o("5Rd1x");a=function(){var e=0,t=document.createElement("div");function n(e){return t.appendChild(e.dom),e}function i(n){for(var i=0;i<t.children.length;i++)t.children[i].style.display=i===n?"block":"none";e=n}t.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",t.addEventListener("click",(function(n){n.preventDefault(),i(++e%t.children.length)}),!1);var o=(performance||Date).now(),r=o,l=0,s=n(new a.Panel("FPS","#0ff","#002")),d=n(new a.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var f=n(new a.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:t,addPanel:n,showPanel:i,begin:function(){o=(performance||Date).now()},end:function(){l++;var e=(performance||Date).now();if(d.update(e-o,200),r+1e3<=e&&(s.update(1e3*l/(e-r),100),r=e,l=0,f)){var t=performance.memory;f.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){o=this.end()},domElement:t,setMode:i}},a.Panel=function(e,t,n){var i=1/0,o=0,a=Math.round,r=a(window.devicePixelRatio||1),l=80*r,s=48*r,d=3*r,f=2*r,c=3*r,g=15*r,u=74*r,m=30*r,p=document.createElement("canvas");p.width=l,p.height=s,p.style.cssText="width:80px;height:48px";var h=p.getContext("2d");return h.font="bold "+9*r+"px Helvetica,Arial,sans-serif",h.textBaseline="top",h.fillStyle=n,h.fillRect(0,0,l,s),h.fillStyle=t,h.fillText(e,d,f),h.fillRect(c,g,u,m),h.fillStyle=n,h.globalAlpha=.9,h.fillRect(c,g,u,m),{dom:p,update:function(s,v){i=Math.min(i,s),o=Math.max(o,s),h.fillStyle=n,h.globalAlpha=1,h.fillRect(0,0,l,g),h.fillStyle=t,h.fillText(a(s)+" "+e+" ("+a(i)+"-"+a(o)+")",d,f),h.drawImage(p,c+r,g,u-r,m,c,g,u-r,m),h.fillRect(c+u-r,g,r,m),h.fillStyle=n,h.globalAlpha=.9,h.fillRect(c+u-r,g,r,a((1-s/v)*m))}}};const d=new(e(a));d.showPanel(0);let f=!1;var c=o("2HSCJ"),g=o("hlgjA"),u=o("l1cPW"),m=o("9ajTk"),p=o("9fA99");const h=new r.WebGLRenderer,v=window.devicePixelRatio||1,w=new r.Color(.07,.07,.15);h.setPixelRatio(v),h.setClearColor(w),h.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(h.domElement);const y=new r.Scene,S=new r.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,1e3);S.position.x=0,S.position.y=2,S.position.z=10,new s.OrbitControls(S,h.domElement);const x={time:{value:1},scanLineScale:{value:1/v},scanLineIntensity:{value:.75},color:{value:new r.Vector3(.07,.07,.15)},lightingIntensity:{value:3.5},filmGrainIntensity:{value:.15},resolution:{value:new r.Vector2(window.innerWidth*v,window.innerHeight*v)},opacity:{value:.8},opacityJitterStrength:{value:.05},opacityJitterSpeed:{value:40},smoothStepLighting:{value:!0},exposure:{value:2},wiggleStrength:{value:2},wigglePeriod:{value:3},wiggleDuration:{value:.1}},P=new r.ShaderMaterial({transparent:!0,uniforms:x,vertexShader:"\n\t\tvarying vec3 vNormal;\n\t\tuniform mat4 inverseViewMatrix;\n\t\tuniform float time;\n\t\tuniform float wiggleStrength;\n\t\tuniform float wigglePeriod;\n\t\tuniform float wiggleDuration;\n\n\t\tvoid main()\n\t\t{\n\t\t\tvNormal = normal;\n\t\t\tfloat viewSpaceY = (modelViewMatrix * vec4(position, 1.0)).y;\n\t\t\tfloat wiggleFactor = 0.0;\n\t\t\tif (fract(time / wigglePeriod) > 1.0 - wiggleDuration) {\n\t\t\t\twiggleFactor = wiggleStrength;\n\t\t\t}\n\n\t\t\tfloat jitterScale = 25.0;\n\t\t\tfloat jitterSpeed = 80.0;\n\t\t\tfloat x = viewSpaceY * jitterScale + time * jitterSpeed;\n\t\t\tvec4 noiseShift = inverseViewMatrix * vec4(wiggleFactor * sin(x / 3.0) * sin(x / 13.0), 0.0, 0.0, 0.0);\n\t\t\tvec3 shiftedPosition = noiseShift.xyz / 7.0 + position;\n\t\t\tvec4 mvPosition = modelViewMatrix * vec4(shiftedPosition, 1.0);\n\t\t\tgl_Position = projectionMatrix * mvPosition;\n\t\t}",fragmentShader:'\n\t\t#define PI 3.141592653589793\n\t\tuniform float scanLineScale;\n\t\tuniform float scanLineIntensity;\n\t\tuniform float filmGrainIntensity;\n\t\tuniform float time;\n\t\tuniform float exposure;\n\t\tuniform vec3 color;\n\t\tuniform float opacity;\n\t\tuniform vec2 resolution;\n\t\tuniform float lightingIntensity;\n\t\tuniform bool smoothStepLighting;\n\t\tuniform float opacityJitterStrength;\n\t\tuniform float opacityJitterSpeed;\n\t\tvarying vec3 vNormal;\t// Interpolated Normal vector passed in from vertex shader\n\n\t\t// Psuedo-random generator from https://thebookofshaders.com/10/\n\t\tfloat random(vec2 st) {\n\t\t\treturn fract(sin(dot(st.xy, vec2(12.9898,78.233))) * 43758.5453123);\n\t\t}\n\n\t\tfloat getVerticalNoise(float verticalNoiseFrameRate, float verticalNoiseSpeed, float verticalNoiseScale) {\n\t\t\tfloat v = gl_FragCoord.y / resolution.y * verticalNoiseScale;\n\t\t\tfloat theta = (v + floor(time * verticalNoiseFrameRate) * verticalNoiseSpeed);\n\t\t\tfloat verticalNoiseStrength = 1.5;\n\t\t\treturn pow(100.0, sin(theta) * sin(theta / 3.0) * sin(theta / 13.0)) / 100.0 * verticalNoiseStrength;\n\t\t}\n\n\t\tvoid main() {\n\t\t\t// Some basic Lambertian-ish reflectance.\n\t\t\tvec3 lightDirection = normalize(vec3(0.7, 0.5, 1.0));\n\t\t\tfloat diffuse = max(dot(vNormal, lightDirection), 0.0);\n\t\t\tif (smoothStepLighting)\n\t\t\t\tdiffuse = smoothstep(0.0, 1.0, diffuse);\n\t\t\tdiffuse *= lightingIntensity;\n\n\t\t\t// Use a "spikey" sine equation shifted by time for some moving glowing noise bars.\n\n\t\t\tfloat scanLineMultiplier = mix(1.0 - scanLineIntensity, 1.0, abs(sin(gl_FragCoord.y * scanLineScale * PI * 0.25)));\n\n\t\t\tfloat verticalNoise = getVerticalNoise(12.0, 2.0, 80.0) + getVerticalNoise(8.0, 1.0, 26.0);\n\n\t\t\tfloat brightness = diffuse + verticalNoise;\n\t\t\t\n\t\t\tfloat filmGrain = (2.0 * random(gl_FragCoord.xy / resolution + fract(time)) - 1.0) * filmGrainIntensity;\n\n\t\t\tvec3 fragColor = ((mix(color.xyz, vec3(0.1, 0.2, 1.0), brightness) * exposure) + filmGrain) * scanLineMultiplier;\n\n\t\t\tfloat theta = time * opacityJitterSpeed;\n\t\t\tfloat opacityJitter = (sin(theta) / 2.0 + 1.0) * opacityJitterStrength;\n\t\t\tgl_FragColor = vec4(fragColor, opacity - opacityJitter);\n\t\t}\n\t'}),C=new r.Mesh(new r.BoxGeometry(2,2,2,20,20,20),P);C.position.x=-4,y.add(C);const b=new r.Mesh(new r.SphereGeometry(1.2,22,22),P);y.add(b);const I=new r.Mesh(new r.TorusKnotGeometry(1,.34,128,16),P);I.position.x=4,y.add(I),f=!f,f?document.body.appendChild(d.dom):d.dom.remove();const N=new c.EffectComposer(h);N.setSize(window.innerWidth,window.innerHeight);const L=new u.RenderPass(y,S);N.addPass(L);const M=new g.UnrealBloomPass(new r.Vector2(window.innerWidth,window.innerHeight),.5,1,.2);N.addPass(M);const R=new m.ShaderPass(p.FXAAShader),F=h.getPixelRatio();R.material.uniforms.resolution.value.x=1/(window.innerWidth*F),R.material.uniforms.resolution.value.y=1/(window.innerHeight*F),N.addPass(R);const J=new l.GUI,W={bloom:M.enabled,"Anti-aliasing":R.enabled,Opacity:x.opacity.value},A={"Film grain":x.filmGrainIntensity.value,Jitter:x.opacityJitterStrength.value,"Jitter speed":x.opacityJitterSpeed.value,"Wiggle strength":x.wiggleStrength.value,"Wiggle period":x.wigglePeriod.value,"Wiggle duration":x.wiggleDuration.value},D=J.addFolder("Noise");D.add(A,"Film grain",0,1).onChange((e=>{P.uniforms.filmGrainIntensity.value=e})),D.add(A,"Jitter",0,1).onChange((e=>{P.uniforms.opacityJitterStrength.value=e})),D.add(A,"Jitter speed",0,100).onChange((e=>{P.uniforms.opacityJitterSpeed.value=e})),D.add(A,"Wiggle strength",0,10).onChange((e=>{x.wiggleStrength.value=e})),D.add(A,"Wiggle period",0,10).onChange((e=>{x.wigglePeriod.value=e})),D.add(A,"Wiggle duration",0,1).onChange((e=>{x.wiggleDuration.value=e})),D.open();const G={Intensity:x.lightingIntensity.value,Exposure:x.exposure.value,"Smooth step":x.smoothStepLighting.value},E=J.addFolder("Lighting");E.add(G,"Intensity",0,10).onChange((e=>{P.uniforms.lightingIntensity.value=e})),E.add(G,"Exposure",0,10).onChange((e=>{P.uniforms.exposure.value=e})),E.add(G,"Smooth step").onChange((e=>{P.uniforms.smoothStepLighting.value=e})),E.open(),J.add(W,"Opacity",0,1).onChange((e=>{P.uniforms.opacity.value=e})),J.add(W,"bloom").onChange((e=>{M.enabled=e})),J.add(W,"Anti-aliasing").onChange((e=>{R.enabled=e}));const V={Scale:x.scanLineScale.value,Intensity:x.scanLineIntensity.value},z=J.addFolder("Scanlines");z.add(V,"Scale",0,2).onChange((e=>{P.uniforms.scanLineScale.value=e})),z.add(V,"Intensity",0,1).onChange((e=>{P.uniforms.scanLineIntensity.value=e})),window.confirm("WARNING. This example may potentially trigger seizures for people with photosensitive epilepsy.")&&function e(t){const n=t/1e3;x.inverseViewMatrix={value:S.matrixWorld},x.time.value=n,requestAnimationFrame(e),N.render(y,S),d.update()}();
//# sourceMappingURL=hologram.80e60847.js.map
