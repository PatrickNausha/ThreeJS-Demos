{"mappings":"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","sources":["src/fun-with-transformations-demo.js","node_modules/stats-js/build/stats.min.js","src/debug-stats.js"],"sourcesContent":["import {\n\tScene,\n\tPerspectiveCamera,\n\tWebGLRenderer,\n\tMesh,\n\tHemisphereLight,\n\tColor,\n\tTorusKnotGeometry,\n\tMeshStandardMaterial,\n\tPlaneGeometry,\n\tMeshBasicMaterial,\n\tMatrix4,\n\tVector3,\n\tGroup,\n\tArrowHelper,\n} from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls.js\";\nimport { updateStats, toggleStats } from \"./debug-stats\";\n\nconst renderer = new WebGLRenderer();\nconst devicePixelRatio = window.devicePixelRatio || 1;\nconst clearColor = new Color(0.07, 0.07, 0.15);\nrenderer.setPixelRatio(devicePixelRatio);\nrenderer.setClearColor(clearColor);\nrenderer.setSize(window.innerWidth, window.innerHeight);\ndocument.body.appendChild(renderer.domElement);\n\n// In the beginning ...\nconst scene = new Scene();\n\n// Camera\nconst camera = new PerspectiveCamera(50, window.innerWidth / window.innerHeight, 0.1, 1000);\ncamera.position.x = 0;\ncamera.position.y = 4;\ncamera.position.z = 20;\nnew OrbitControls(camera, renderer.domElement);\n\nconst reflectionPlaneMaterial = new MeshBasicMaterial({\n\tcolor: 0xff0000,\n\twireframe: true,\n});\nconst planeGroup = new Group();\nconst planeMesh = new Mesh(new PlaneGeometry(10, 10, 1, 1), reflectionPlaneMaterial);\nconst planeNormal = new Vector3(0, 0, 1);\nconst planeNormalHelper = new ArrowHelper(planeNormal, new Vector3(0, 0, 0), 2, 0x00ff00);\nconst planeMatrix = new Matrix4();\nplaneGroup.matrixAutoUpdate = false;\nplaneGroup.matrix = planeMatrix;\nplaneGroup.add(planeMesh);\nplaneGroup.add(planeNormalHelper);\nscene.add(planeGroup);\n\nconst groundMaterial = new MeshBasicMaterial({\n\tcolor: 0x0000ff,\n\twireframe: true,\n});\nconst groundMesh = new Mesh(new PlaneGeometry(100, 100, 20, 20), groundMaterial);\ngroundMesh.rotateX(Math.PI / 2);\ngroundMesh.position.y = -5;\nscene.add(groundMesh);\n\nconst material = new MeshStandardMaterial();\nconst mesh = new Mesh(new TorusKnotGeometry(1, 0.34, 128, 16), material);\nscene.add(mesh);\nmesh.matrixAutoUpdate = false;\n\nconst reflection = new Mesh(new TorusKnotGeometry(1, 0.34, 128, 16), material);\nreflection.matrixAutoUpdate = false;\nscene.add(reflection);\n\nconst light = new HemisphereLight(0xccccff, 0xcc9999, 1);\nscene.add(light);\n\n// Show stats\ntoggleStats();\n\n// Main loop\nfunction animate(timestamp) {\n\trequestAnimationFrame(animate);\n\n\tconst timestampSeconds = timestamp / 1000;\n\tmesh.matrix.makeRotationY(timestampSeconds);\n\tmesh.matrix.setPosition(Math.sin(timestampSeconds), 0, 5);\n\n\tconst meshMatrixCopy = mesh.matrix.clone();\n\tconst reflectionMatrix = new Matrix4()\n\t\t.multiply(planeGroup.matrix) // Convert from plane-local space to mirrored world space.\n\t\t.multiply(new Matrix4().makeScale(1, 1, -1)) // Mirror it.\n\t\t.multiply(new Matrix4().getInverse(planeGroup.matrix)) // Convert world space to plane-local space.\n\t\t.multiply(meshMatrixCopy); // Convert mesh-local space to world space.\n\treflection.matrix = reflectionMatrix;\n\n\tplaneGroup.matrix.makeRotationY((Math.PI / 4) * Math.sin(timestampSeconds / 3.21));\n\tplaneGroup.matrix.setPosition(0, 0, Math.sin(timestampSeconds));\n\trenderer.render(scene, camera);\n\tupdateStats();\n}\nanimate();\n","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):e.Stats=t()}(this,function(){\"use strict\";var c=function(){var n=0,l=document.createElement(\"div\");function e(e){return l.appendChild(e.dom),e}function t(e){for(var t=0;t<l.children.length;t++)l.children[t].style.display=t===e?\"block\":\"none\";n=e}l.style.cssText=\"position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000\",l.addEventListener(\"click\",function(e){e.preventDefault(),t(++n%l.children.length)},!1);var i=(performance||Date).now(),a=i,o=0,f=e(new c.Panel(\"FPS\",\"#0ff\",\"#002\")),r=e(new c.Panel(\"MS\",\"#0f0\",\"#020\"));if(self.performance&&self.performance.memory)var d=e(new c.Panel(\"MB\",\"#f08\",\"#201\"));return t(0),{REVISION:16,dom:l,addPanel:e,showPanel:t,begin:function(){i=(performance||Date).now()},end:function(){o++;var e=(performance||Date).now();if(r.update(e-i,200),a+1e3<=e&&(f.update(1e3*o/(e-a),100),a=e,o=0,d)){var t=performance.memory;d.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){i=this.end()},domElement:l,setMode:t}};return c.Panel=function(n,l,i){var a=1/0,o=0,f=Math.round,r=f(window.devicePixelRatio||1),d=80*r,e=48*r,c=3*r,p=2*r,u=3*r,s=15*r,m=74*r,h=30*r,y=document.createElement(\"canvas\");y.width=d,y.height=e,y.style.cssText=\"width:80px;height:48px\";var v=y.getContext(\"2d\");return v.font=\"bold \"+9*r+\"px Helvetica,Arial,sans-serif\",v.textBaseline=\"top\",v.fillStyle=i,v.fillRect(0,0,d,e),v.fillStyle=l,v.fillText(n,c,p),v.fillRect(u,s,m,h),v.fillStyle=i,v.globalAlpha=.9,v.fillRect(u,s,m,h),{dom:y,update:function(e,t){a=Math.min(a,e),o=Math.max(o,e),v.fillStyle=i,v.globalAlpha=1,v.fillRect(0,0,d,s),v.fillStyle=l,v.fillText(f(e)+\" \"+n+\" (\"+f(a)+\"-\"+f(o)+\")\",c,p),v.drawImage(y,u+r,s,m-r,h,u,s,m-r,h),v.fillRect(u+m-r,s,r,h),v.fillStyle=i,v.globalAlpha=.9,v.fillRect(u+m-r,s,r,f((1-e/t)*h))}}},c});\n","import Stats from \"stats-js\";\n\nconst stats = new Stats();\nstats.showPanel(0); // 0: fps, 1: ms, 2: mb, 3+: custom\n\nexport function updateStats() {\n\tstats.update();\n}\n\nlet showStats = false;\nexport function toggleStats() {\n\tshowStats = !showStats;\n\tif (showStats) {\n\t\tdocument.body.appendChild(stats.dom);\n\t} else {\n\t\tstats.dom.remove();\n\t}\n}\n"],"names":["c1","$eq1Fs","parcelRequire","n","l","document","createElement","e1","e","appendChild","dom","t1","t","children","length","style","display","cssText","addEventListener","preventDefault","i","performance","Date","now","a","o","f","Panel","r","self","memory","d","REVISION","addPanel","showPanel","begin","end","update","usedJSHeapSize","jsHeapSizeLimit","this","domElement","setMode","Math","round","window","devicePixelRatio","e2","c","p","u","s","m","h","y","width","height","v","getContext","font","textBaseline","fillStyle","fillRect","fillText","globalAlpha","min","max","drawImage","$a8fffecac97013f4$var$stats","$parcel$interopDefault","$a8fffecac97013f4$var$showStats","$155fc9d75b2187c2$var$renderer","WebGLRenderer","$155fc9d75b2187c2$var$devicePixelRatio","$155fc9d75b2187c2$var$clearColor","Color","setPixelRatio","setClearColor","setSize","innerWidth","innerHeight","body","$155fc9d75b2187c2$var$scene","Scene","$155fc9d75b2187c2$var$camera","PerspectiveCamera","position","x","z","$eOHOW","OrbitControls","$155fc9d75b2187c2$var$reflectionPlaneMaterial","MeshBasicMaterial","color","wireframe","$155fc9d75b2187c2$var$planeGroup","Group","$155fc9d75b2187c2$var$planeMesh","Mesh","PlaneGeometry","$155fc9d75b2187c2$var$planeNormal","Vector3","$155fc9d75b2187c2$var$planeNormalHelper","ArrowHelper","$155fc9d75b2187c2$var$planeMatrix","Matrix4","matrixAutoUpdate","matrix","add","$155fc9d75b2187c2$var$groundMaterial","$155fc9d75b2187c2$var$groundMesh","rotateX","PI","$155fc9d75b2187c2$var$material","MeshStandardMaterial","$155fc9d75b2187c2$var$mesh","TorusKnotGeometry","$155fc9d75b2187c2$var$reflection","$155fc9d75b2187c2$var$light","HemisphereLight","remove","$155fc9d75b2187c2$var$animate","timestamp","requestAnimationFrame","timestampSeconds","makeRotationY","setPosition","sin","meshMatrixCopy","clone","reflectionMatrix","multiply","makeScale","getInverse","render"],"version":3,"file":"fun-with-transformations-demo.97fdb9ca.js.map"}