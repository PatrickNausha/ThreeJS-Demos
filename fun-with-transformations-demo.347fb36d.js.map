{"mappings":"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","sources":["src/fun-with-transformations-demo.js","src/debug-stats.js","node_modules/stats-js/build/stats.min.js"],"sourcesContent":["import {\n\tScene,\n\tPerspectiveCamera,\n\tWebGLRenderer,\n\tMesh,\n\tHemisphereLight,\n\tColor,\n\tTorusKnotGeometry,\n\tMeshStandardMaterial,\n\tPlaneGeometry,\n\tMeshBasicMaterial,\n\tMatrix4,\n\tVector3,\n\tGroup,\n\tArrowHelper,\n} from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls.js\";\nimport { updateStats, toggleStats } from \"./debug-stats\";\n\nconst renderer = new WebGLRenderer();\nconst devicePixelRatio = window.devicePixelRatio || 1;\nconst clearColor = new Color(0.07, 0.07, 0.15);\nrenderer.setPixelRatio(devicePixelRatio);\nrenderer.setClearColor(clearColor);\nrenderer.setSize(window.innerWidth, window.innerHeight);\ndocument.body.appendChild(renderer.domElement);\n\n// In the beginning ...\nconst scene = new Scene();\n\n// Camera\nconst camera = new PerspectiveCamera(50, window.innerWidth / window.innerHeight, 0.1, 1000);\ncamera.position.x = 0;\ncamera.position.y = 4;\ncamera.position.z = 20;\nnew OrbitControls(camera, renderer.domElement);\n\nconst reflectionPlaneMaterial = new MeshBasicMaterial({\n\tcolor: 0xff0000,\n\twireframe: true,\n});\nconst planeGroup = new Group();\nconst planeMesh = new Mesh(new PlaneGeometry(10, 10, 1, 1), reflectionPlaneMaterial);\nconst planeNormal = new Vector3(0, 0, 1);\nconst planeNormalHelper = new ArrowHelper(planeNormal, new Vector3(0, 0, 0), 2, 0x00ff00);\nconst planeMatrix = new Matrix4();\nplaneGroup.matrixAutoUpdate = false;\nplaneGroup.matrix = planeMatrix;\nplaneGroup.add(planeMesh);\nplaneGroup.add(planeNormalHelper);\nscene.add(planeGroup);\n\nconst groundMaterial = new MeshBasicMaterial({\n\tcolor: 0x0000ff,\n\twireframe: true,\n});\nconst groundMesh = new Mesh(new PlaneGeometry(100, 100, 20, 20), groundMaterial);\ngroundMesh.rotateX(Math.PI / 2);\ngroundMesh.position.y = -5;\nscene.add(groundMesh);\n\nconst material = new MeshStandardMaterial();\nconst mesh = new Mesh(new TorusKnotGeometry(1, 0.34, 128, 16), material);\nscene.add(mesh);\nmesh.matrixAutoUpdate = false;\n\nconst reflection = new Mesh(new TorusKnotGeometry(1, 0.34, 128, 16), material);\nreflection.matrixAutoUpdate = false;\nscene.add(reflection);\n\nconst light = new HemisphereLight(0xccccff, 0xcc9999, 1);\nscene.add(light);\n\n// Show stats\ntoggleStats();\n\n// Main loop\nfunction animate(timestamp) {\n\trequestAnimationFrame(animate);\n\n\tconst timestampSeconds = timestamp / 1000;\n\tmesh.matrix.makeRotationY(timestampSeconds);\n\tmesh.matrix.setPosition(Math.sin(timestampSeconds), 0, 5);\n\n\tconst meshMatrixCopy = mesh.matrix.clone();\n\tconst reflectionMatrix = new Matrix4()\n\t\t.multiply(planeGroup.matrix) // Convert from plane-local space to mirrored world space.\n\t\t.multiply(new Matrix4().makeScale(1, 1, -1)) // Mirror it.\n\t\t.multiply(new Matrix4().getInverse(planeGroup.matrix)) // Convert world space to plane-local space.\n\t\t.multiply(meshMatrixCopy); // Convert mesh-local space to world space.\n\treflection.matrix = reflectionMatrix;\n\n\tplaneGroup.matrix.makeRotationY((Math.PI / 4) * Math.sin(timestampSeconds / 3.21));\n\tplaneGroup.matrix.setPosition(0, 0, Math.sin(timestampSeconds));\n\trenderer.render(scene, camera);\n\tupdateStats();\n}\nanimate();\n","import Stats from \"stats-js\";\n\nconst stats = new Stats();\nstats.showPanel(0); // 0: fps, 1: ms, 2: mb, 3+: custom\n\nexport function updateStats() {\n\tstats.update();\n}\n\nlet showStats = false;\nexport function toggleStats() {\n\tshowStats = !showStats;\n\tif (showStats) {\n\t\tdocument.body.appendChild(stats.dom);\n\t} else {\n\t\tstats.dom.remove();\n\t}\n}\n","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):e.Stats=t()}(this,function(){\"use strict\";var c=function(){var n=0,l=document.createElement(\"div\");function e(e){return l.appendChild(e.dom),e}function t(e){for(var t=0;t<l.children.length;t++)l.children[t].style.display=t===e?\"block\":\"none\";n=e}l.style.cssText=\"position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000\",l.addEventListener(\"click\",function(e){e.preventDefault(),t(++n%l.children.length)},!1);var i=(performance||Date).now(),a=i,o=0,f=e(new c.Panel(\"FPS\",\"#0ff\",\"#002\")),r=e(new c.Panel(\"MS\",\"#0f0\",\"#020\"));if(self.performance&&self.performance.memory)var d=e(new c.Panel(\"MB\",\"#f08\",\"#201\"));return t(0),{REVISION:16,dom:l,addPanel:e,showPanel:t,begin:function(){i=(performance||Date).now()},end:function(){o++;var e=(performance||Date).now();if(r.update(e-i,200),a+1e3<=e&&(f.update(1e3*o/(e-a),100),a=e,o=0,d)){var t=performance.memory;d.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){i=this.end()},domElement:l,setMode:t}};return c.Panel=function(n,l,i){var a=1/0,o=0,f=Math.round,r=f(window.devicePixelRatio||1),d=80*r,e=48*r,c=3*r,p=2*r,u=3*r,s=15*r,m=74*r,h=30*r,y=document.createElement(\"canvas\");y.width=d,y.height=e,y.style.cssText=\"width:80px;height:48px\";var v=y.getContext(\"2d\");return v.font=\"bold \"+9*r+\"px Helvetica,Arial,sans-serif\",v.textBaseline=\"top\",v.fillStyle=i,v.fillRect(0,0,d,e),v.fillStyle=l,v.fillText(n,c,p),v.fillRect(u,s,m,h),v.fillStyle=i,v.globalAlpha=.9,v.fillRect(u,s,m,h),{dom:y,update:function(e,t){a=Math.min(a,e),o=Math.max(o,e),v.fillStyle=i,v.globalAlpha=1,v.fillRect(0,0,d,s),v.fillStyle=l,v.fillText(f(e)+\" \"+n+\" (\"+f(a)+\"-\"+f(o)+\")\",c,p),v.drawImage(y,u+r,s,m-r,h,u,s,m-r,h),v.fillRect(u+m-r,s,r,h),v.fillStyle=i,v.globalAlpha=.9,v.fillRect(u+m-r,s,r,f((1-e/t)*h))}}},c});\n"],"names":["$6OvZu","parcelRequire","$9a0281efa5d1b360$var$stats","$parcel$interopDefault","c1","n","l","document","createElement","e1","e","appendChild","dom","t","_$t","children","length","style","display","cssText","addEventListener","preventDefault","i","performance","Date","now","a","o","f","Panel","r","self","memory","d","REVISION","addPanel","showPanel","begin","end","_$e","update","usedJSHeapSize","jsHeapSizeLimit","this","domElement","setMode","Math","round","window","devicePixelRatio","e2","c","p","u","s","m","h","y","width","height","v","getContext","font","textBaseline","fillStyle","fillRect","fillText","globalAlpha","min","max","drawImage","$9a0281efa5d1b360$var$showStats","$e76269ac617c13b3$var$renderer","WebGLRenderer","$e76269ac617c13b3$var$devicePixelRatio","$e76269ac617c13b3$var$clearColor","Color","setPixelRatio","setClearColor","setSize","innerWidth","innerHeight","body","$e76269ac617c13b3$var$scene","Scene","$e76269ac617c13b3$var$camera","PerspectiveCamera","position","x","z","$3bF5H","OrbitControls","$e76269ac617c13b3$var$reflectionPlaneMaterial","MeshBasicMaterial","color","wireframe","$e76269ac617c13b3$var$planeGroup","Group","$e76269ac617c13b3$var$planeMesh","Mesh","PlaneGeometry","$e76269ac617c13b3$var$planeNormal","Vector3","$e76269ac617c13b3$var$planeNormalHelper","ArrowHelper","$e76269ac617c13b3$var$planeMatrix","Matrix4","matrixAutoUpdate","matrix","add","$e76269ac617c13b3$var$groundMaterial","$e76269ac617c13b3$var$groundMesh","rotateX","PI","$e76269ac617c13b3$var$material","MeshStandardMaterial","$e76269ac617c13b3$var$mesh","TorusKnotGeometry","$e76269ac617c13b3$var$reflection","$e76269ac617c13b3$var$light","HemisphereLight","remove","$e76269ac617c13b3$var$animate","timestamp","requestAnimationFrame","timestampSeconds","makeRotationY","setPosition","sin","meshMatrixCopy","clone","reflectionMatrix","multiply","makeScale","getInverse","render"],"version":3,"file":"fun-with-transformations-demo.347fb36d.js.map"}