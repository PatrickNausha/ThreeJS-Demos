{"mappings":"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","sources":["<anon>","src/fun-with-transformations-demo.js","src/debug-stats.js","node_modules/stats-js/build/stats.min.js"],"sourcesContent":["function $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\nvar $parcel$global =\ntypeof globalThis !== 'undefined'\n  ? globalThis\n  : typeof self !== 'undefined'\n  ? self\n  : typeof window !== 'undefined'\n  ? window\n  : typeof global !== 'undefined'\n  ? global\n  : {};\nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire1287\"];\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire1287\"] = parcelRequire;\n}\n\nvar $eq1Fs = parcelRequire(\"eq1Fs\");\n\nvar $eOHOW = parcelRequire(\"eOHOW\");\nvar $a07f7f9dd384c0a2$exports = {};\n!function(e, t) {\n    $a07f7f9dd384c0a2$exports = t();\n}($a07f7f9dd384c0a2$exports, function() {\n    \"use strict\";\n    var c = function() {\n        var n = 0, l = document.createElement(\"div\");\n        function e(e) {\n            return l.appendChild(e.dom), e;\n        }\n        function t(e) {\n            for(var t = 0; t < l.children.length; t++)l.children[t].style.display = t === e ? \"block\" : \"none\";\n            n = e;\n        }\n        l.style.cssText = \"position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000\", l.addEventListener(\"click\", function(e) {\n            e.preventDefault(), t(++n % l.children.length);\n        }, !1);\n        var i = (performance || Date).now(), a = i, o = 0, f = e(new c.Panel(\"FPS\", \"#0ff\", \"#002\")), r = e(new c.Panel(\"MS\", \"#0f0\", \"#020\"));\n        if (self.performance && self.performance.memory) var d = e(new c.Panel(\"MB\", \"#f08\", \"#201\"));\n        return t(0), {\n            REVISION: 16,\n            dom: l,\n            addPanel: e,\n            showPanel: t,\n            begin: function() {\n                i = (performance || Date).now();\n            },\n            end: function() {\n                o++;\n                var e = (performance || Date).now();\n                if (r.update(e - i, 200), a + 1e3 <= e && (f.update(1e3 * o / (e - a), 100), a = e, o = 0, d)) {\n                    var t = performance.memory;\n                    d.update(t.usedJSHeapSize / 1048576, t.jsHeapSizeLimit / 1048576);\n                }\n                return e;\n            },\n            update: function() {\n                i = this.end();\n            },\n            domElement: l,\n            setMode: t\n        };\n    };\n    return c.Panel = function(n, l, i) {\n        var a = 1 / 0, o = 0, f = Math.round, r = f(window.devicePixelRatio || 1), d = 80 * r, e = 48 * r, c = 3 * r, p = 2 * r, u = 3 * r, s = 15 * r, m = 74 * r, h = 30 * r, y = document.createElement(\"canvas\");\n        y.width = d, y.height = e, y.style.cssText = \"width:80px;height:48px\";\n        var v = y.getContext(\"2d\");\n        return v.font = \"bold \" + 9 * r + \"px Helvetica,Arial,sans-serif\", v.textBaseline = \"top\", v.fillStyle = i, v.fillRect(0, 0, d, e), v.fillStyle = l, v.fillText(n, c, p), v.fillRect(u, s, m, h), v.fillStyle = i, v.globalAlpha = .9, v.fillRect(u, s, m, h), {\n            dom: y,\n            update: function(e, t) {\n                a = Math.min(a, e), o = Math.max(o, e), v.fillStyle = i, v.globalAlpha = 1, v.fillRect(0, 0, d, s), v.fillStyle = l, v.fillText(f(e) + \" \" + n + \" (\" + f(a) + \"-\" + f(o) + \")\", c, p), v.drawImage(y, u + r, s, m - r, h, u, s, m - r, h), v.fillRect(u + m - r, s, r, h), v.fillStyle = i, v.globalAlpha = .9, v.fillRect(u + m - r, s, r, f((1 - e / t) * h));\n            }\n        };\n    }, c;\n});\n\n\nconst $a8fffecac97013f4$var$stats = new (0, (/*@__PURE__*/$parcel$interopDefault($a07f7f9dd384c0a2$exports)))();\n$a8fffecac97013f4$var$stats.showPanel(0); // 0: fps, 1: ms, 2: mb, 3+: custom\nfunction $a8fffecac97013f4$export$f4fa5dfc8595aab7() {\n    $a8fffecac97013f4$var$stats.update();\n}\nlet $a8fffecac97013f4$var$showStats = false;\nfunction $a8fffecac97013f4$export$83c65e7868c10750() {\n    $a8fffecac97013f4$var$showStats = !$a8fffecac97013f4$var$showStats;\n    if ($a8fffecac97013f4$var$showStats) document.body.appendChild($a8fffecac97013f4$var$stats.dom);\n    else $a8fffecac97013f4$var$stats.dom.remove();\n}\n\n\nconst $155fc9d75b2187c2$var$renderer = new (0, $eq1Fs.WebGLRenderer)();\nconst $155fc9d75b2187c2$var$devicePixelRatio = window.devicePixelRatio || 1;\nconst $155fc9d75b2187c2$var$clearColor = new (0, $eq1Fs.Color)(0.07, 0.07, 0.15);\n$155fc9d75b2187c2$var$renderer.setPixelRatio($155fc9d75b2187c2$var$devicePixelRatio);\n$155fc9d75b2187c2$var$renderer.setClearColor($155fc9d75b2187c2$var$clearColor);\n$155fc9d75b2187c2$var$renderer.setSize(window.innerWidth, window.innerHeight);\ndocument.body.appendChild($155fc9d75b2187c2$var$renderer.domElement);\n// In the beginning ...\nconst $155fc9d75b2187c2$var$scene = new (0, $eq1Fs.Scene)();\n// Camera\nconst $155fc9d75b2187c2$var$camera = new (0, $eq1Fs.PerspectiveCamera)(50, window.innerWidth / window.innerHeight, 0.1, 1000);\n$155fc9d75b2187c2$var$camera.position.x = 0;\n$155fc9d75b2187c2$var$camera.position.y = 4;\n$155fc9d75b2187c2$var$camera.position.z = 20;\nnew (0, $eOHOW.OrbitControls)($155fc9d75b2187c2$var$camera, $155fc9d75b2187c2$var$renderer.domElement);\nconst $155fc9d75b2187c2$var$reflectionPlaneMaterial = new (0, $eq1Fs.MeshBasicMaterial)({\n    color: 0xff0000,\n    wireframe: true\n});\nconst $155fc9d75b2187c2$var$planeGroup = new (0, $eq1Fs.Group)();\nconst $155fc9d75b2187c2$var$planeMesh = new (0, $eq1Fs.Mesh)(new (0, $eq1Fs.PlaneGeometry)(10, 10, 1, 1), $155fc9d75b2187c2$var$reflectionPlaneMaterial);\nconst $155fc9d75b2187c2$var$planeNormal = new (0, $eq1Fs.Vector3)(0, 0, 1);\nconst $155fc9d75b2187c2$var$planeNormalHelper = new (0, $eq1Fs.ArrowHelper)($155fc9d75b2187c2$var$planeNormal, new (0, $eq1Fs.Vector3)(0, 0, 0), 2, 0x00ff00);\nconst $155fc9d75b2187c2$var$planeMatrix = new (0, $eq1Fs.Matrix4)();\n$155fc9d75b2187c2$var$planeGroup.matrixAutoUpdate = false;\n$155fc9d75b2187c2$var$planeGroup.matrix = $155fc9d75b2187c2$var$planeMatrix;\n$155fc9d75b2187c2$var$planeGroup.add($155fc9d75b2187c2$var$planeMesh);\n$155fc9d75b2187c2$var$planeGroup.add($155fc9d75b2187c2$var$planeNormalHelper);\n$155fc9d75b2187c2$var$scene.add($155fc9d75b2187c2$var$planeGroup);\nconst $155fc9d75b2187c2$var$groundMaterial = new (0, $eq1Fs.MeshBasicMaterial)({\n    color: 0x0000ff,\n    wireframe: true\n});\nconst $155fc9d75b2187c2$var$groundMesh = new (0, $eq1Fs.Mesh)(new (0, $eq1Fs.PlaneGeometry)(100, 100, 20, 20), $155fc9d75b2187c2$var$groundMaterial);\n$155fc9d75b2187c2$var$groundMesh.rotateX(Math.PI / 2);\n$155fc9d75b2187c2$var$groundMesh.position.y = -5;\n$155fc9d75b2187c2$var$scene.add($155fc9d75b2187c2$var$groundMesh);\nconst $155fc9d75b2187c2$var$material = new (0, $eq1Fs.MeshStandardMaterial)();\nconst $155fc9d75b2187c2$var$mesh = new (0, $eq1Fs.Mesh)(new (0, $eq1Fs.TorusKnotGeometry)(1, 0.34, 128, 16), $155fc9d75b2187c2$var$material);\n$155fc9d75b2187c2$var$scene.add($155fc9d75b2187c2$var$mesh);\n$155fc9d75b2187c2$var$mesh.matrixAutoUpdate = false;\nconst $155fc9d75b2187c2$var$reflection = new (0, $eq1Fs.Mesh)(new (0, $eq1Fs.TorusKnotGeometry)(1, 0.34, 128, 16), $155fc9d75b2187c2$var$material);\n$155fc9d75b2187c2$var$reflection.matrixAutoUpdate = false;\n$155fc9d75b2187c2$var$scene.add($155fc9d75b2187c2$var$reflection);\nconst $155fc9d75b2187c2$var$light = new (0, $eq1Fs.HemisphereLight)(0xccccff, 0xcc9999, 1);\n$155fc9d75b2187c2$var$scene.add($155fc9d75b2187c2$var$light);\n// Show stats\n(0, $a8fffecac97013f4$export$83c65e7868c10750)();\n// Main loop\nfunction $155fc9d75b2187c2$var$animate(timestamp) {\n    requestAnimationFrame($155fc9d75b2187c2$var$animate);\n    const timestampSeconds = timestamp / 1000;\n    $155fc9d75b2187c2$var$mesh.matrix.makeRotationY(timestampSeconds);\n    $155fc9d75b2187c2$var$mesh.matrix.setPosition(Math.sin(timestampSeconds), 0, 5);\n    const meshMatrixCopy = $155fc9d75b2187c2$var$mesh.matrix.clone();\n    const reflectionMatrix = new (0, $eq1Fs.Matrix4)().multiply($155fc9d75b2187c2$var$planeGroup.matrix) // Convert from plane-local space to mirrored world space.\n    .multiply(new (0, $eq1Fs.Matrix4)().makeScale(1, 1, -1)) // Mirror it.\n    .multiply(new (0, $eq1Fs.Matrix4)().getInverse($155fc9d75b2187c2$var$planeGroup.matrix)) // Convert world space to plane-local space.\n    .multiply(meshMatrixCopy); // Convert mesh-local space to world space.\n    $155fc9d75b2187c2$var$reflection.matrix = reflectionMatrix;\n    $155fc9d75b2187c2$var$planeGroup.matrix.makeRotationY(Math.PI / 4 * Math.sin(timestampSeconds / 3.21));\n    $155fc9d75b2187c2$var$planeGroup.matrix.setPosition(0, 0, Math.sin(timestampSeconds));\n    $155fc9d75b2187c2$var$renderer.render($155fc9d75b2187c2$var$scene, $155fc9d75b2187c2$var$camera);\n    (0, $a8fffecac97013f4$export$f4fa5dfc8595aab7)();\n}\n$155fc9d75b2187c2$var$animate();\n\n\n//# sourceMappingURL=fun-with-transformations-demo.838a9a91.js.map\n","import {\n\tScene,\n\tPerspectiveCamera,\n\tWebGLRenderer,\n\tMesh,\n\tHemisphereLight,\n\tColor,\n\tTorusKnotGeometry,\n\tMeshStandardMaterial,\n\tPlaneGeometry,\n\tMeshBasicMaterial,\n\tMatrix4,\n\tVector3,\n\tGroup,\n\tArrowHelper,\n} from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls.js\";\nimport { updateStats, toggleStats } from \"./debug-stats\";\n\nconst renderer = new WebGLRenderer();\nconst devicePixelRatio = window.devicePixelRatio || 1;\nconst clearColor = new Color(0.07, 0.07, 0.15);\nrenderer.setPixelRatio(devicePixelRatio);\nrenderer.setClearColor(clearColor);\nrenderer.setSize(window.innerWidth, window.innerHeight);\ndocument.body.appendChild(renderer.domElement);\n\n// In the beginning ...\nconst scene = new Scene();\n\n// Camera\nconst camera = new PerspectiveCamera(50, window.innerWidth / window.innerHeight, 0.1, 1000);\ncamera.position.x = 0;\ncamera.position.y = 4;\ncamera.position.z = 20;\nnew OrbitControls(camera, renderer.domElement);\n\nconst reflectionPlaneMaterial = new MeshBasicMaterial({\n\tcolor: 0xff0000,\n\twireframe: true,\n});\nconst planeGroup = new Group();\nconst planeMesh = new Mesh(new PlaneGeometry(10, 10, 1, 1), reflectionPlaneMaterial);\nconst planeNormal = new Vector3(0, 0, 1);\nconst planeNormalHelper = new ArrowHelper(planeNormal, new Vector3(0, 0, 0), 2, 0x00ff00);\nconst planeMatrix = new Matrix4();\nplaneGroup.matrixAutoUpdate = false;\nplaneGroup.matrix = planeMatrix;\nplaneGroup.add(planeMesh);\nplaneGroup.add(planeNormalHelper);\nscene.add(planeGroup);\n\nconst groundMaterial = new MeshBasicMaterial({\n\tcolor: 0x0000ff,\n\twireframe: true,\n});\nconst groundMesh = new Mesh(new PlaneGeometry(100, 100, 20, 20), groundMaterial);\ngroundMesh.rotateX(Math.PI / 2);\ngroundMesh.position.y = -5;\nscene.add(groundMesh);\n\nconst material = new MeshStandardMaterial();\nconst mesh = new Mesh(new TorusKnotGeometry(1, 0.34, 128, 16), material);\nscene.add(mesh);\nmesh.matrixAutoUpdate = false;\n\nconst reflection = new Mesh(new TorusKnotGeometry(1, 0.34, 128, 16), material);\nreflection.matrixAutoUpdate = false;\nscene.add(reflection);\n\nconst light = new HemisphereLight(0xccccff, 0xcc9999, 1);\nscene.add(light);\n\n// Show stats\ntoggleStats();\n\n// Main loop\nfunction animate(timestamp) {\n\trequestAnimationFrame(animate);\n\n\tconst timestampSeconds = timestamp / 1000;\n\tmesh.matrix.makeRotationY(timestampSeconds);\n\tmesh.matrix.setPosition(Math.sin(timestampSeconds), 0, 5);\n\n\tconst meshMatrixCopy = mesh.matrix.clone();\n\tconst reflectionMatrix = new Matrix4()\n\t\t.multiply(planeGroup.matrix) // Convert from plane-local space to mirrored world space.\n\t\t.multiply(new Matrix4().makeScale(1, 1, -1)) // Mirror it.\n\t\t.multiply(new Matrix4().getInverse(planeGroup.matrix)) // Convert world space to plane-local space.\n\t\t.multiply(meshMatrixCopy); // Convert mesh-local space to world space.\n\treflection.matrix = reflectionMatrix;\n\n\tplaneGroup.matrix.makeRotationY((Math.PI / 4) * Math.sin(timestampSeconds / 3.21));\n\tplaneGroup.matrix.setPosition(0, 0, Math.sin(timestampSeconds));\n\trenderer.render(scene, camera);\n\tupdateStats();\n}\nanimate();\n","import Stats from \"stats-js\";\n\nconst stats = new Stats();\nstats.showPanel(0); // 0: fps, 1: ms, 2: mb, 3+: custom\n\nexport function updateStats() {\n\tstats.update();\n}\n\nlet showStats = false;\nexport function toggleStats() {\n\tshowStats = !showStats;\n\tif (showStats) {\n\t\tdocument.body.appendChild(stats.dom);\n\t} else {\n\t\tstats.dom.remove();\n\t}\n}\n","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):e.Stats=t()}(this,function(){\"use strict\";var c=function(){var n=0,l=document.createElement(\"div\");function e(e){return l.appendChild(e.dom),e}function t(e){for(var t=0;t<l.children.length;t++)l.children[t].style.display=t===e?\"block\":\"none\";n=e}l.style.cssText=\"position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000\",l.addEventListener(\"click\",function(e){e.preventDefault(),t(++n%l.children.length)},!1);var i=(performance||Date).now(),a=i,o=0,f=e(new c.Panel(\"FPS\",\"#0ff\",\"#002\")),r=e(new c.Panel(\"MS\",\"#0f0\",\"#020\"));if(self.performance&&self.performance.memory)var d=e(new c.Panel(\"MB\",\"#f08\",\"#201\"));return t(0),{REVISION:16,dom:l,addPanel:e,showPanel:t,begin:function(){i=(performance||Date).now()},end:function(){o++;var e=(performance||Date).now();if(r.update(e-i,200),a+1e3<=e&&(f.update(1e3*o/(e-a),100),a=e,o=0,d)){var t=performance.memory;d.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){i=this.end()},domElement:l,setMode:t}};return c.Panel=function(n,l,i){var a=1/0,o=0,f=Math.round,r=f(window.devicePixelRatio||1),d=80*r,e=48*r,c=3*r,p=2*r,u=3*r,s=15*r,m=74*r,h=30*r,y=document.createElement(\"canvas\");y.width=d,y.height=e,y.style.cssText=\"width:80px;height:48px\";var v=y.getContext(\"2d\");return v.font=\"bold \"+9*r+\"px Helvetica,Arial,sans-serif\",v.textBaseline=\"top\",v.fillStyle=i,v.fillRect(0,0,d,e),v.fillStyle=l,v.fillText(n,c,p),v.fillRect(u,s,m,h),v.fillStyle=i,v.globalAlpha=.9,v.fillRect(u,s,m,h),{dom:y,update:function(e,t){a=Math.min(a,e),o=Math.max(o,e),v.fillStyle=i,v.globalAlpha=1,v.fillRect(0,0,d,s),v.fillStyle=l,v.fillText(f(e)+\" \"+n+\" (\"+f(a)+\"-\"+f(o)+\")\",c,p),v.drawImage(y,u+r,s,m-r,h,u,s,m-r,h),v.fillRect(u+m-r,s,r,h),v.fillStyle=i,v.globalAlpha=.9,v.fillRect(u+m-r,s,r,f((1-e/t)*h))}}},c});\n"],"names":["$parcel$global","globalThis","self","window","global","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","$eq1Fs","$eOHOW","$a07f7f9dd384c0a2$exports","t","c","n","l","document","createElement","e","appendChild","dom","children","length","style","display","cssText","addEventListener","preventDefault","i","performance","Date","now","a","o","f","Panel","r","memory","d","REVISION","addPanel","showPanel","begin","end","update","usedJSHeapSize","jsHeapSizeLimit","domElement","setMode","Math","round","devicePixelRatio","p","u","s","m","h","y","width","height","v","getContext","font","textBaseline","fillStyle","fillRect","fillText","globalAlpha","min","max","drawImage","$a8fffecac97013f4$var$stats","$parcel$interopDefault","__esModule","default","$a8fffecac97013f4$var$showStats","$155fc9d75b2187c2$var$renderer","WebGLRenderer","$155fc9d75b2187c2$var$devicePixelRatio","$155fc9d75b2187c2$var$clearColor","Color","setPixelRatio","setClearColor","setSize","innerWidth","innerHeight","body","$155fc9d75b2187c2$var$scene","Scene","$155fc9d75b2187c2$var$camera","PerspectiveCamera","position","x","z","OrbitControls","$155fc9d75b2187c2$var$reflectionPlaneMaterial","MeshBasicMaterial","color","wireframe","$155fc9d75b2187c2$var$planeGroup","Group","$155fc9d75b2187c2$var$planeMesh","Mesh","PlaneGeometry","$155fc9d75b2187c2$var$planeNormal","Vector3","$155fc9d75b2187c2$var$planeNormalHelper","ArrowHelper","$155fc9d75b2187c2$var$planeMatrix","Matrix4","matrixAutoUpdate","matrix","add","$155fc9d75b2187c2$var$groundMaterial","$155fc9d75b2187c2$var$groundMesh","rotateX","PI","$155fc9d75b2187c2$var$material","MeshStandardMaterial","$155fc9d75b2187c2$var$mesh","TorusKnotGeometry","$155fc9d75b2187c2$var$reflection","$155fc9d75b2187c2$var$light","HemisphereLight","remove","$155fc9d75b2187c2$var$animate","timestamp","requestAnimationFrame","timestampSeconds","makeRotationY","setPosition","sin","meshMatrixCopy","clone","reflectionMatrix","multiply","makeScale","getInverse","render"],"version":3,"file":"fun-with-transformations-demo.838a9a91.js.map"}